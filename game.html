<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Catch the Lemon 🍋</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #lemon {
      position: absolute;
      width: 60px;
      height: 60px;
      cursor: pointer;
      transition: top 0.3s, left 0.3s;
      display: none;
    }
  </style>
</head>
<body class="bg-yellow-50 flex flex-col items-center justify-center h-screen overflow-hidden relative">

  <!-- Name Input Screen -->
  <div id="startScreen" class="text-center">
    <h1 class="text-3xl font-bold mb-4">🍋 Catch the Lemon!</h1>
    <input id="playerName" type="text" placeholder="Enter your name..." class="p-2 rounded border-2 border-yellow-500">
    <button onclick="startGame()" class="bg-yellow-400 px-4 py-2 rounded mt-4 hover:bg-yellow-500 transition">Start Game</button>
  </div>

  <!-- Game Info -->
  <div id="gameScreen" class="hidden text-center">
    <p class="text-xl mb-2">Player: <span id="displayName"></span></p>
    <p class="mb-6 text-lg">Score: <span id="score" class="font-bold text-green-600">0</span></p>
    <img src="lemon.jpg" alt="lemon" id="lemon" />
  </div>

  <!-- Leaderboard -->
  <div id="leaderboard" class="absolute top-4 right-4 bg-white p-4 rounded shadow w-60 hidden">
    <h2 class="text-lg font-bold mb-2">🏆 Leaderboard</h2>
    <ul id="leaderboardList" class="text-left text-sm"></ul>
  </div>

  <script>
    const lemon = document.getElementById("lemon");
    const scoreEl = document.getElementById("score");
    const playerNameInput = document.getElementById("playerName");
    const displayName = document.getElementById("displayName");
    const leaderboardList = document.getElementById("leaderboardList");

    let score = 0;
    let playerName = "";
    let gameInterval;

    function randomPosition() {
      const maxX = window.innerWidth - 60;
      const maxY = window.innerHeight - 60;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      lemon.style.left = x + "px";
      lemon.style.top = y + "px";
    }

    lemon.addEventListener("click", () => {
      score++;
      scoreEl.textContent = score;
      randomPosition();
    });

    function startGame() {
      playerName = playerNameInput.value.trim();
      if (!playerName) {
        alert("Please enter your name!");
        return;
      }

      document.getElementById("startScreen").classList.add("hidden");
      document.getElementById("gameScreen").classList.remove("hidden");
      document.getElementById("leaderboard").classList.remove("hidden");
      displayName.textContent = playerName;
      lemon.style.display = "block";
      score = 0;
      scoreEl.textContent = score;
      randomPosition();

      clearInterval(gameInterval);
      gameInterval = setInterval(() => {
        randomPosition();
      }, 1500);

      // Stop game after 30 seconds
      setTimeout(endGame, 30000);
    }

    function endGame() {
      clearInterval(gameInterval);
      lemon.style.display = "none";
      saveScore(playerName, score);
      showLeaderboard();
      alert(`⏱️ Time's up!\n${playerName}, your score is ${score}`);
      document.getElementById("startScreen").classList.remove("hidden");
      document.getElementById("gameScreen").classList.add("hidden");
    }

    function saveScore(name, score) {
      const scores = JSON.parse(localStorage.getItem("lemonScores") || "[]");
      scores.push({ name, score });
      scores.sort((a, b) => b.score - a.score);
      localStorage.setItem("lemonScores", JSON.stringify(scores.slice(0, 5)));
    }

    function showLeaderboard() {
      const scores = JSON.parse(localStorage.getItem("lemonScores") || "[]");
      leaderboardList.innerHTML = "";
      scores.forEach((entry, index) => {
        leaderboardList.innerHTML += `<li>${index + 1}. <strong>${entry.name}</strong>: ${entry.score}</li>`;
      });
    }

    // Show leaderboard when page loads
    showLeaderboard();
  </script>
</body>
</html>
